CREATE TABLE IF NOT EXISTS "schema_migrations" ("version" varchar(255) NOT NULL, 'rollback_sql' text default NULL, 'optimize_on_rollback' boolean default NULL);
CREATE TABLE IF NOT EXISTS "media_parts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "media_item_id" integer, "directory_id" integer, "hash" varchar(255), "open_subtitle_hash" varchar(255), "file" varchar(255), "index" integer, "size" integer(8), "duration" integer, "created_at" datetime, "updated_at" datetime, "deleted_at" datetime, "extra_data" varchar(255));
CREATE TABLE sqlite_sequence(name,seq);
CREATE TABLE IF NOT EXISTS "library_sections" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "library_id" integer, "name" varchar(255), "name_sort" varchar(255) COLLATE NOCASE, "section_type" integer, "language" varchar(255), "agent" varchar(255), "scanner" varchar(255), "user_thumb_url" varchar(255), "user_art_url" varchar(255), "user_theme_music_url" varchar(255), "public" boolean, "created_at" datetime, "updated_at" datetime, "scanned_at" datetime, "display_secondary_level" boolean, "user_fields" varchar(255), "query_xml" text, "query_type" integer, "uuid" varchar(255), "changed_at" integer(8) DEFAULT 0, 'content_changed_at' integer(8) default '0');
CREATE TABLE IF NOT EXISTS "section_locations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "library_section_id" integer, "root_path" varchar(255), "available" boolean DEFAULT 't', "scanned_at" datetime, "created_at" datetime, "updated_at" datetime);
CREATE TABLE IF NOT EXISTS "directories" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "library_section_id" integer, "parent_directory_id" integer, "path" varchar(255), "created_at" datetime, "updated_at" datetime, "deleted_at" datetime);
CREATE TABLE IF NOT EXISTS "stream_types" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255));
CREATE TABLE IF NOT EXISTS "metadata_item_views" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "account_id" integer, "guid" varchar(255), "metadata_type" integer, "library_section_id" integer, "grandparent_title" varchar(255), "parent_index" integer, "parent_title" varchar(255), "index" integer, "title" varchar(255), "thumb_url" varchar(255), "viewed_at" datetime, 'grandparent_guid' varchar(255), 'originally_available_at' datetime, 'device_id' integer);
CREATE TABLE IF NOT EXISTS "media_metadata_mappings" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "media_guid" varchar(255), "metadata_guid" varchar(255), "created_at" datetime, "updated_at" datetime);
CREATE TABLE IF NOT EXISTS "plugins" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "identifier" varchar(255), "framework_version" integer, "access_count" integer, "installed_at" datetime, "accessed_at" datetime, "modified_at" datetime);
CREATE TABLE IF NOT EXISTS "plugin_prefixes" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "plugin_id" integer, "name" varchar(255), "prefix" varchar(255), "art_url" varchar(255), "thumb_url" varchar(255), "titlebar_url" varchar(255), "share" boolean, "has_store_services" boolean, "prefs" boolean);
CREATE TABLE IF NOT EXISTS "tags" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "metadata_item_id" integer, "tag" varchar(255) COLLATE NOCASE, "tag_type" integer, "user_thumb_url" varchar(255), "user_art_url" varchar(255), "user_music_url" varchar(255), "created_at" datetime, "updated_at" datetime, "tag_value" integer, "extra_data" varchar(255), 'key' varchar(255), 'parent_id' integer);
CREATE TABLE IF NOT EXISTS "taggings" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "metadata_item_id" integer, "tag_id" integer, "index" integer, "text" varchar(255), "time_offset" integer, "end_time_offset" integer, "thumb_url" varchar(255), "created_at" datetime, "extra_data" varchar(255));
CREATE TABLE IF NOT EXISTS "metadata_relations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "metadata_item_id" integer, "related_metadata_item_id" integer, "relation_type" integer, "created_at" datetime, "updated_at" datetime);
CREATE TABLE IF NOT EXISTS "view_settings" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "account_id" integer, "client_type" varchar(255), "view_group" varchar(255), "view_id" integer, "sort_id" integer, "sort_asc" boolean, "created_at" datetime, "updated_at" datetime);
CREATE TABLE IF NOT EXISTS "library_section_permissions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "library_section_id" integer, "account_id" integer, "permission" integer);
CREATE TABLE IF NOT EXISTS "plugin_permissions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "plugin_id" integer, "account_id" integer, "permission" integer);
CREATE TABLE IF NOT EXISTS "metadata_item_settings" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "account_id" integer, "guid" varchar(255), "rating" float, "view_offset" integer, "view_count" integer, "last_viewed_at" datetime, "created_at" datetime, "updated_at" datetime, "skip_count" integer DEFAULT 0, "last_skipped_at" datetime DEFAULT NULL, "changed_at" integer(8) DEFAULT 0, 'extra_data' varchar(255), 'last_rated_at' datetime);
CREATE TABLE IF NOT EXISTS "library_timeline_entries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "library_section_id" integer, "metadata_item_id" integer, "state" integer, "updated_at" datetime);
CREATE TABLE IF NOT EXISTS "accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "hashed_password" varchar(255), "salt" varchar(255), "created_at" datetime, "updated_at" datetime, "default_audio_language" varchar(255), "default_subtitle_language" varchar(255), "auto_select_subtitle" boolean DEFAULT 't', "auto_select_audio" boolean DEFAULT 't');
CREATE TABLE IF NOT EXISTS "media_item_settings" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "account_id" integer, "media_item_id" integer, "settings" varchar(255), "created_at" datetime, "updated_at" datetime);
CREATE TABLE IF NOT EXISTS "media_part_settings" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "account_id" integer, "media_part_id" integer, "selected_audio_stream_id" integer, "selected_subtitle_stream_id" integer, "settings" varchar(255), "created_at" datetime, "updated_at" datetime, "changed_at" integer(8) DEFAULT 0);
CREATE TABLE IF NOT EXISTS "media_streams" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "stream_type_id" integer, "media_item_id" integer, "url" varchar(255), "codec" varchar(255), "language" varchar(255), "created_at" datetime, "updated_at" datetime, "index" integer, "media_part_id" integer, "channels" integer, "bitrate" integer, "url_index" integer, "default" boolean DEFAULT 0, "forced" boolean DEFAULT 0, "extra_data" varchar(255));
CREATE TABLE IF NOT EXISTS "synchronization_files" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "client_identifier" varchar(255), "sync_list_id" integer(8), "sync_item_id" integer(8), "item_uri" varchar(255), "num_parts" integer, "state" integer, "state_context" integer, "extra_data" varchar(255));
CREATE TABLE IF NOT EXISTS "media_items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "library_section_id" integer, "section_location_id" integer, "metadata_item_id" integer, "type_id" integer, "width" integer, "height" integer, "size" integer(8), "duration" integer, "bitrate" integer, "container" varchar(255), "video_codec" varchar(255), "audio_codec" varchar(255), "display_aspect_ratio" float, "frames_per_second" float, "audio_channels" integer, "interlaced" boolean, "source" varchar(255), "hints" varchar(255), "display_offset" integer, "settings" varchar(255), "created_at" datetime, "updated_at" datetime, "optimized_for_streaming" boolean, "deleted_at" datetime, "media_analysis_version" integer DEFAULT 0, "sample_aspect_ratio" float, "extra_data" varchar(255), "proxy_type" integer, 'channel_id' integer, 'begins_at' datetime, 'ends_at' datetime, 'color_trc' varchar(255));
CREATE TABLE sqlite_stat1(tbl,idx,stat);
CREATE TABLE IF NOT EXISTS "metadata_items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "library_section_id" integer, "parent_id" integer, "metadata_type" integer, "guid" varchar(255), "media_item_count" integer, "title" varchar(255), "title_sort" varchar(255) COLLATE NOCASE, "original_title" varchar(255), "studio" varchar(255), "rating" float, "rating_count" integer, "tagline" varchar(255), "summary" text, "trivia" text, "quotes" text, "content_rating" varchar(255), "content_rating_age" integer, "index" integer, "absolute_index" integer, "duration" integer, "user_thumb_url" varchar(255), "user_art_url" varchar(255), "user_banner_url" varchar(255), "user_music_url" varchar(255), "user_fields" varchar(255), "tags_genre" varchar(255), "tags_collection" varchar(255), "tags_director" varchar(255), "tags_writer" varchar(255), "tags_star" varchar(255), "originally_available_at" datetime, "available_at" datetime, "expires_at" datetime, "refreshed_at" datetime, "year" integer, "added_at" datetime, "created_at" datetime, "updated_at" datetime, "deleted_at" datetime, "tags_country" varchar(255), "extra_data" varchar(255), "hash" varchar(255), "audience_rating" float, "changed_at" integer(8) DEFAULT 0, "resources_changed_at" integer(8) DEFAULT 0, 'remote' integer);
CREATE TABLE IF NOT EXISTS "cloudsync_files" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "device_identifier" varchar(255), "original_url" varchar(255), "provider" varchar(255), "new_key" varchar(255), "query_string" varchar(255), 'extra_data' varchar(255));
CREATE TABLE IF NOT EXISTS "play_queue_items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "play_queue_id" integer, "metadata_item_id" integer, "order" float, "up_next" boolean, "play_queue_generator_id" integer);
CREATE TABLE IF NOT EXISTS "play_queues" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "client_identifier" varchar(255), "account_id" integer, "playlist_id" integer, "sync_item_id" integer, "play_queue_generator_id" integer, "generator_start_index" integer, "generator_end_index" integer, "generator_items_count" integer, "generator_ids" blob, "seed" integer, "current_play_queue_item_id" integer, "last_added_play_queue_item_id" integer, "version" integer, "created_at" datetime, "updated_at" datetime, "metadata_type" integer, "total_items_count" integer, "generator_generator_ids" blob, 'extra_data' varchar(255));
CREATE TABLE IF NOT EXISTS "play_queue_generators" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "playlist_id" integer, "metadata_item_id" integer, "uri" varchar(255), "limit" integer, "continuous" boolean, "order" float, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "changed_at" integer(8) DEFAULT 0, "recursive" boolean, "type" integer, "extra_data" varchar(255));
CREATE TABLE IF NOT EXISTS "metadata_item_accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "account_id" integer, "metadata_item_id" integer);
CREATE TABLE IF NOT EXISTS "synced_play_queue_generators" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "sync_list_id" integer(8), "sync_item_id" integer(8), "playlist_id" integer, "play_queue_generator_id" integer, "changed_at" integer(8), "state" integer, "state_context" integer, "first_packaged_at" integer(8));
CREATE TABLE IF NOT EXISTS "synced_ancestor_items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "sync_list_id" integer(8), "metadata_item_id" integer, "changed_at" integer(8), "reference_count" integer, "first_packaged_at" integer(8), 'parent_id' integer, 'state' integer);
CREATE TABLE IF NOT EXISTS "synced_library_sections" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "sync_list_id" integer(8), "library_section_id" integer, "changed_at" integer(8), "reference_count" integer, "first_packaged_at" integer(8), 'state' integer);
CREATE TABLE IF NOT EXISTS "synced_metadata_items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "sync_list_id" integer(8), "sync_item_id" integer(8), "metadata_item_id" integer, "changed_at" integer(8), "first_packaged_at" integer(8), "state" integer, "state_context" integer, "selected_media_id" integer, "selected_part_id" integer, "media_decision" integer, "file_size" integer(8), "media_analysis_extra_data" varchar(255), 'parent_id' integer, 'library_section_id' integer);
CREATE TABLE IF NOT EXISTS "sync_schema_versions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "version" integer, "changed_at" integer(8));
CREATE TABLE IF NOT EXISTS "versioned_metadata_items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "metadata_item_id" integer, "generator_id" integer, "target_tag_id" integer, "state" integer, "state_context" integer, "selected_media_id" integer, "version_media_id" integer, "media_decision" integer, "file_size" integer(8));
CREATE TABLE IF NOT EXISTS "preferences" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "value" varchar(255));
CREATE TABLE IF NOT EXISTS 'devices' ('id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 'identifier' varchar(255), 'name' varchar(255), 'created_at' datetime, 'updated_at' datetime, 'platform' string);
CREATE TABLE IF NOT EXISTS 'statistics_bandwidth' ('id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 'account_id' integer, 'device_id' integer, 'timespan' integer, 'at' datetime, 'lan' boolean, 'bytes' integer(8));
CREATE TABLE IF NOT EXISTS 'statistics_media' ('id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 'account_id' integer, 'device_id' integer, 'timespan' integer, 'at' datetime, 'metadata_type' integer, 'count' integer, 'duration' integer);
CREATE TABLE IF NOT EXISTS "spellfix_metadata_titles_vocab"(
  id INTEGER PRIMARY KEY,
  rank INT,
  langid INT,
  word TEXT,
  k1 TEXT,
  k2 TEXT
);
CREATE TABLE IF NOT EXISTS "spellfix_tag_titles_vocab"(
  id INTEGER PRIMARY KEY,
  rank INT,
  langid INT,
  word TEXT,
  k1 TEXT,
  k2 TEXT
);
CREATE TABLE IF NOT EXISTS 'fts4_metadata_titles_segments'(blockid INTEGER PRIMARY KEY, block BLOB);
CREATE TABLE IF NOT EXISTS 'fts4_metadata_titles_segdir'(level INTEGER,idx INTEGER,start_block INTEGER,leaves_end_block INTEGER,end_block INTEGER,root BLOB,PRIMARY KEY(level, idx));
CREATE TABLE IF NOT EXISTS 'fts4_metadata_titles_docsize'(docid INTEGER PRIMARY KEY, size BLOB);
CREATE TABLE IF NOT EXISTS 'fts4_metadata_titles_stat'(id INTEGER PRIMARY KEY, value BLOB);
CREATE TABLE IF NOT EXISTS 'fts4_tag_titles_segments'(blockid INTEGER PRIMARY KEY, block BLOB);
CREATE TABLE IF NOT EXISTS 'fts4_tag_titles_segdir'(level INTEGER,idx INTEGER,start_block INTEGER,leaves_end_block INTEGER,end_block INTEGER,root BLOB,PRIMARY KEY(level, idx));
CREATE TABLE IF NOT EXISTS 'fts4_tag_titles_docsize'(docid INTEGER PRIMARY KEY, size BLOB);
CREATE TABLE IF NOT EXISTS 'fts4_tag_titles_stat'(id INTEGER PRIMARY KEY, value BLOB);
CREATE TABLE IF NOT EXISTS 'media_provider_resources' ('id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 'parent_id' integer, 'type' integer, 'status' integer, 'state' integer, 'identifier' varchar(255), 'protocol' varchar(255), 'uri' varchar(255), 'uuid' varchar(255), 'extra_data' varchar(255), 'last_seen_at' datetime, 'created_at' datetime, 'updated_at' datetime, 'data' blob);
CREATE TABLE IF NOT EXISTS 'media_subscriptions' ('id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 'order' float, 'metadata_type' integer, 'target_metadata_item_id' integer, 'target_library_section_id' integer, 'target_section_location_id' integer, 'extra_data' varchar(255), 'created_at' datetime, 'updated_at' datetime);
CREATE TABLE IF NOT EXISTS 'media_grabs' ('id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 'uuid' varchar(255), 'status' integer, 'error' integer, 'metadata_item_id' integer, 'media_subscription_id' integer, 'extra_data' varchar(255), 'created_at' datetime, 'updated_at' datetime);
CREATE TABLE IF NOT EXISTS 'metadata_item_clusters' ('id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 'zoom_level' integer, 'library_section_id' integer, 'title' varchar(255), 'count' integer, 'starts_at' datetime, 'ends_at' datetime, 'extra_data' varchar(255));
CREATE TABLE IF NOT EXISTS 'metadata_item_clusterings' ('id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 'metadata_item_id' integer, 'metadata_item_cluster_id' integer, 'index' integer, 'version' integer, FOREIGN KEY(metadata_item_cluster_id) REFERENCES metadata_item_clusters(id) ON DELETE CASCADE, FOREIGN KEY(metadata_item_id) REFERENCES metadata_items(id) ON DELETE CASCADE);
CREATE TABLE IF NOT EXISTS "locations_node"(nodeno INTEGER PRIMARY KEY, data BLOB);
CREATE TABLE IF NOT EXISTS "locations_rowid"(rowid INTEGER PRIMARY KEY, nodeno INTEGER);
CREATE TABLE IF NOT EXISTS "locations_parent"(nodeno INTEGER PRIMARY KEY, parentnode INTEGER);
CREATE TABLE IF NOT EXISTS 'locatables' ('id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 'location_id' INTEGER NOT NULL, 'locatable_id' INTEGER NOT NULL, 'locatable_type' VARCHAR(255) NOT NULL, 'created_at' DATETIME, 'updated_at' DATETIME, 'extra_data' VARCHAR(255), 'geocoding_version' integer, UNIQUE('location_id', 'locatable_id', 'locatable_type'));
CREATE TABLE IF NOT EXISTS 'blobs' ('id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 'blob' blob, 'linked_type' varchar(255), 'linked_id' integer, 'linked_guid' varchar(255), 'created_at' datetime, 'blob_type' integer);
CREATE TABLE IF NOT EXISTS 'location_places' ('id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 'location_id' INTEGER, 'guid' VARCHAR(255) NOT NULL, UNIQUE('location_id', 'guid'));
CREATE TABLE IF NOT EXISTS 'external_metadata_sources' ('id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 'uri' varchar(255), 'source_title' varchar(255), 'user_title' varchar(255), 'online' integer);
CREATE TABLE IF NOT EXISTS 'external_metadata_items' ('id' INTEGER, 'external_metadata_source_id' integer,'library_section_id' integer, 'metadata_type' integer, 'guid' varchar(255), 'title' varchar(255), 'parent_title' varchar(255), 'year' integer,'added_at' integer,'updated_at' integer, 'extra_data' varchar(255),FOREIGN KEY('external_metadata_source_id') REFERENCES external_metadata_sources(id) ON DELETE CASCADE );
CREATE TABLE IF NOT EXISTS 'media_stream_settings' ('id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 'account_id' INTEGER, 'media_stream_id' INTEGER, 'extra_data' VARCHAR(255), created_at datetime, updated_at datetime, UNIQUE('media_stream_id', 'account_id'));
CREATE TABLE IF NOT EXISTS 'statistics_resources' ('id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 'timespan' integer, 'at' datetime, 'host_cpu_utilization' float, 'process_cpu_utilization' float, 'host_memory_utilization' float, 'process_memory_utilization' float);
CREATE TABLE IF NOT EXISTS 'metadata_subscription_desired_items' ('sub_id' INTEGER, 'remote_id' VARCHAR(255));
CREATE TABLE IF NOT EXISTS 'remote_id_translation' ('id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 'type' INTEGER, 'local_id' INTEGER, 'remote_id' VARCHAR(255));
CREATE TABLE IF NOT EXISTS 'hub_templates' ('id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 'section' varchar(255), 'identifier' varchar(255), 'title' varchar(255), 'home_visibility' integer, 'recommended_visibility' integer, 'order' float, 'extra_data' varchar(255));
CREATE INDEX "index_media_parts_on_directory_id" ON "media_parts" ("directory_id" );
CREATE INDEX "index_media_parts_on_media_item_id" ON "media_parts" ("media_item_id" );
CREATE INDEX "index_media_parts_on_hash" ON "media_parts" ("hash" );
CREATE INDEX "index_media_parts_on_file" ON "media_parts" ("file" );
CREATE INDEX "index_library_sections_on_name_sort" ON "library_sections" ("name_sort" collate nocase);
CREATE INDEX "index_library_sections_on_name" ON "library_sections" ("name" );
CREATE INDEX "index_metadata_item_views_on_guid" ON "metadata_item_views" ("guid" );
CREATE INDEX "index_metadata_item_views_on_library_section_id" ON "metadata_item_views" ("library_section_id" );
CREATE INDEX "index_metadata_item_views_on_viewed_at" ON "metadata_item_views" ("viewed_at" );
CREATE INDEX "index_tags_on_tag" ON "tags" ("tag" );
CREATE INDEX "index_tags_on_tag_type" ON "tags" ("tag_type" );
CREATE INDEX "index_taggings_on_metadata_item_id" ON "taggings" ("metadata_item_id" );
CREATE INDEX "index_taggings_on_tag_id" ON "taggings" ("tag_id" );
CREATE INDEX "index_metadata_relations_on_metadata_item_id" ON "metadata_relations" ("metadata_item_id" );
CREATE INDEX "index_metadata_relations_on_related_metadata_item_id" ON "metadata_relations" ("related_metadata_item_id" );
CREATE INDEX "index_metadata_relations_on_relation_type" ON "metadata_relations" ("relation_type" );
CREATE INDEX "index_view_settings_on_view_group" ON "view_settings" ("view_group" );
CREATE INDEX "index_view_settings_on_client_type" ON "view_settings" ("client_type" );
CREATE INDEX "index_library_section_permissions_on_library_section_id" ON "library_section_permissions" ("library_section_id" );
CREATE INDEX "index_library_section_permissions_on_account_id" ON "library_section_permissions" ("account_id" );
CREATE INDEX "index_plugin_permissions_on_plugin_id" ON "plugin_permissions" ("plugin_id" );
CREATE INDEX "index_plugin_permissions_on_account_id" ON "plugin_permissions" ("account_id" );
CREATE INDEX "index_metadata_item_settings_on_account_id" ON "metadata_item_settings" ("account_id" );
CREATE INDEX "index_metadata_item_settings_on_guid" ON "metadata_item_settings" ("guid" );
CREATE INDEX "index_library_timeline_entries_on_library_section_id" ON "library_timeline_entries" ("library_section_id" );
CREATE INDEX "index_library_timeline_entries_on_metadata_item_id" ON "library_timeline_entries" ("metadata_item_id" );
CREATE INDEX "index_library_timeline_entries_on_state" ON "library_timeline_entries" ("state" );
CREATE INDEX "index_library_timeline_entries_on_updated_at" ON "library_timeline_entries" ("updated_at" );
CREATE INDEX "index_accounts_on_name" ON "accounts" ("name" );
CREATE INDEX "index_media_item_settings_on_account_id" ON "media_item_settings" ("account_id" );
CREATE INDEX "index_media_item_settings_on_media_item_id" ON "media_item_settings" ("media_item_id" );
CREATE INDEX "index_media_part_settings_on_account_id" ON "media_part_settings" ("account_id" );
CREATE INDEX "index_media_part_settings_on_media_part_id" ON "media_part_settings" ("media_part_id" );
CREATE INDEX "index_media_parts_on_deleted_at" ON "media_parts" ("deleted_at" );
CREATE INDEX "index_directories_on_deleted_at" ON "directories" ("deleted_at" );
CREATE INDEX "index_media_streams_on_media_part_id" ON "media_streams" ("media_part_id" );
CREATE INDEX "index_synchronization_files_on_client_identifier" ON "synchronization_files" ("client_identifier" );
CREATE INDEX "index_synchronization_files_on_sync_list_id" ON "synchronization_files" ("sync_list_id" );
CREATE INDEX "index_synchronization_files_on_sync_item_id" ON "synchronization_files" ("sync_item_id" );
CREATE INDEX "index_synchronization_files_on_item_uri" ON "synchronization_files" ("item_uri" );
CREATE INDEX "index_media_items_on_library_section_id" ON "media_items" ("library_section_id" );
CREATE INDEX "index_media_items_on_metadata_item_id" ON "media_items" ("metadata_item_id" );
CREATE INDEX "index_media_items_on_deleted_at" ON "media_items" ("deleted_at" );
CREATE INDEX "index_media_items_on_media_analysis_version" ON "media_items" ("media_analysis_version" );
CREATE INDEX "index_metadata_items_on_library_section_id" ON "metadata_items" ("library_section_id" );
CREATE INDEX "index_metadata_items_on_parent_id" ON "metadata_items" ("parent_id" );
CREATE INDEX "index_metadata_items_on_created_at" ON "metadata_items" ("created_at" );
CREATE INDEX "index_metadata_items_on_index" ON "metadata_items" ("index" );
CREATE INDEX "index_metadata_items_on_title" ON "metadata_items" ("title" );
CREATE INDEX "index_metadata_items_on_title_sort" ON "metadata_items" ("title_sort" );
CREATE INDEX "index_metadata_items_on_guid" ON "metadata_items" ("guid" );
CREATE INDEX "index_metadata_items_on_metadata_type" ON "metadata_items" ("metadata_type" );
CREATE INDEX "index_metadata_items_on_deleted_at" ON "metadata_items" ("deleted_at" );
CREATE INDEX "index_metadata_items_on_library_section_id_and_metadata_type_and_added_at" ON "metadata_items" ("library_section_id", "metadata_type", "added_at" );
CREATE INDEX "index_metadata_items_on_hash" ON "metadata_items" ("hash" );
CREATE INDEX "index_cloudsync_files_on_device_identifier_and_original_url" ON "cloudsync_files" ("device_identifier", "original_url" );
CREATE INDEX "index_plugin_prefixes_on_plugin_id" ON "plugin_prefixes" ("plugin_id" );
CREATE INDEX "index_media_streams_on_media_item_id" ON "media_streams" ("media_item_id" );
CREATE INDEX "index_media_parts_on_size" ON "media_parts" ("size" );
CREATE INDEX "index_directories_on_path" ON "directories" ("path" );
CREATE INDEX "index_play_queue_items_on_play_queue_id" ON "play_queue_items" ("play_queue_id" );
CREATE INDEX "index_play_queue_items_on_metadata_item_id" ON "play_queue_items" ("metadata_item_id" );
CREATE INDEX "index_play_queue_items_on_order" ON "play_queue_items" ("order" );
CREATE INDEX "index_play_queues_on_account_id" ON "play_queues" ("account_id" );
CREATE INDEX "index_play_queues_on_playlist_id" ON "play_queues" ("playlist_id" );
CREATE INDEX "index_play_queues_on_sync_item_id" ON "play_queues" ("sync_item_id" );
CREATE INDEX "index_play_queue_generators_on_playlist_id" ON "play_queue_generators" ("playlist_id" );
CREATE INDEX "index_play_queue_generators_on_metadata_item_id" ON "play_queue_generators" ("metadata_item_id" );
CREATE INDEX "index_play_queue_generators_on_order" ON "play_queue_generators" ("order" );
CREATE INDEX "index_media_streams_on_language" ON "media_streams" ("language" );
CREATE INDEX "index_metadata_item_accounts_on_account_id" ON "metadata_item_accounts" ("account_id" );
CREATE INDEX "index_metadata_item_accounts_on_metadata_item_id" ON "metadata_item_accounts" ("metadata_item_id" );
CREATE INDEX "index_metadata_items_on_added_at" ON "metadata_items" ("added_at" );
CREATE INDEX "index_metadata_item_settings_on_view_count" ON "metadata_item_settings" ("view_count" );
CREATE INDEX "index_metadata_item_settings_on_view_offset" ON "metadata_item_settings" ("view_offset" );
CREATE INDEX "index_metadata_item_settings_on_skip_count" ON "metadata_item_settings" ("skip_count" );
CREATE INDEX "index_metadata_item_settings_on_rating" ON "metadata_item_settings" ("rating" );
CREATE INDEX "index_metadata_item_settings_on_last_viewed_at" ON "metadata_item_settings" ("last_viewed_at" );
CREATE INDEX "index_metadata_items_on_originally_available_at" ON "metadata_items" ("originally_available_at" );
CREATE INDEX "index_synced_play_queue_generators_on_sync_list_id" ON "synced_play_queue_generators" ("sync_list_id" );
CREATE INDEX "index_synced_play_queue_generators_on_sync_item_id" ON "synced_play_queue_generators" ("sync_item_id" );
CREATE INDEX "index_synced_play_queue_generators_on_playlist_id" ON "synced_play_queue_generators" ("playlist_id" );
CREATE INDEX "index_synced_play_queue_generators_on_play_queue_generator_id" ON "synced_play_queue_generators" ("play_queue_generator_id" );
CREATE INDEX "index_synced_play_queue_generators_on_changed_at" ON "synced_play_queue_generators" ("changed_at" );
CREATE INDEX "index_synced_play_queue_generators_on_state" ON "synced_play_queue_generators" ("state" );
CREATE INDEX "index_synced_ancestor_items_on_sync_list_id" ON "synced_ancestor_items" ("sync_list_id" );
CREATE INDEX "index_synced_ancestor_items_on_metadata_item_id" ON "synced_ancestor_items" ("metadata_item_id" );
CREATE INDEX "index_synced_ancestor_items_on_changed_at" ON "synced_ancestor_items" ("changed_at" );
CREATE INDEX "index_synced_ancestor_items_on_reference_count" ON "synced_ancestor_items" ("reference_count" );
CREATE INDEX "index_synced_library_sections_on_sync_list_id" ON "synced_library_sections" ("sync_list_id" );
CREATE INDEX "index_synced_library_sections_on_library_section_id" ON "synced_library_sections" ("library_section_id" );
CREATE INDEX "index_synced_library_sections_on_changed_at" ON "synced_library_sections" ("changed_at" );
CREATE INDEX "index_synced_library_sections_on_reference_count" ON "synced_library_sections" ("reference_count" );
CREATE INDEX "index_metadata_items_on_changed_at" ON "metadata_items" ("changed_at" );
CREATE INDEX "index_metadata_items_on_resources_changed_at" ON "metadata_items" ("resources_changed_at" );
CREATE INDEX "index_play_queue_generators_on_changed_at" ON "play_queue_generators" ("changed_at" );
CREATE INDEX "index_library_sections_on_changed_at" ON "library_sections" ("changed_at" );
CREATE INDEX "index_metadata_item_settings_on_changed_at" ON "metadata_item_settings" ("changed_at" );
CREATE INDEX "index_media_part_settings_on_changed_at" ON "media_part_settings" ("changed_at" );
CREATE INDEX "index_tags_on_tag_type_and_tag" ON "tags" ("tag_type", "tag" );
CREATE INDEX "index_synced_metadata_items_on_sync_list_id" ON "synced_metadata_items" ("sync_list_id" );
CREATE INDEX "index_synced_metadata_items_on_sync_item_id" ON "synced_metadata_items" ("sync_item_id" );
CREATE INDEX "index_synced_metadata_items_on_metadata_item_id" ON "synced_metadata_items" ("metadata_item_id" );
CREATE INDEX "index_synced_metadata_items_on_changed_at" ON "synced_metadata_items" ("changed_at" );
CREATE INDEX "index_synced_metadata_items_on_first_packaged_at" ON "synced_metadata_items" ("first_packaged_at" );
CREATE INDEX "index_synced_metadata_items_on_state" ON "synced_metadata_items" ("state" );
CREATE INDEX "index_sync_schema_versions_on_changed_at" ON "sync_schema_versions" ("changed_at" );
CREATE INDEX "index_versioned_metadata_items_on_metadata_item_id" ON "versioned_metadata_items" ("metadata_item_id" );
CREATE INDEX "index_versioned_metadata_items_on_generator_id" ON "versioned_metadata_items" ("generator_id" );
CREATE INDEX "index_versioned_metadata_items_on_target_tag_id" ON "versioned_metadata_items" ("target_tag_id" );
CREATE INDEX "index_versioned_metadata_items_on_version_media_id" ON "versioned_metadata_items" ("version_media_id" );
CREATE INDEX "index_versioned_metadata_items_on_selected_media_id" ON "versioned_metadata_items" ("selected_media_id" );
CREATE INDEX 'index_devices_on_identifier' ON 'devices' ('identifier' );
CREATE INDEX "spellfix_metadata_titles_vocab_index_langid_k2" ON "spellfix_metadata_titles_vocab"(langid,k2);
CREATE INDEX "spellfix_tag_titles_vocab_index_langid_k2" ON "spellfix_tag_titles_vocab"(langid,k2);
CREATE INDEX 'index_metadata_items_on_original_title' ON 'metadata_items' ('original_title');
CREATE INDEX 'index_metadata_item_views_on_grandparent_guid' ON 'metadata_item_views' ('grandparent_guid');
CREATE INDEX 'index_synced_metadata_items_parent_id' ON 'synced_metadata_items' ('parent_id');
CREATE INDEX 'index_synced_metadata_items_library_section_id' ON 'synced_metadata_items' ('library_section_id');
CREATE INDEX 'index_synced_ancestor_items_parent_id' ON 'synced_ancestor_items' ('parent_id');
CREATE INDEX 'index_synced_ancestor_items_state' ON 'synced_ancestor_items' ('state');
CREATE INDEX 'index_synced_library_sections_state' ON 'synced_library_sections' ('state');
CREATE INDEX 'index_tags_on_key' ON 'tags' ('key');
CREATE INDEX 'index_media_items_on_begins_at' ON 'media_items' ('begins_at');
CREATE INDEX 'index_media_items_on_ends_at' ON 'media_items' ('ends_at');
CREATE INDEX 'index_media_items_on_channel_id' ON 'media_items' ('channel_id');
CREATE INDEX 'index_media_items_on_channel_id_and_begins_at' ON 'media_items' ('channel_id','begins_at');
CREATE INDEX 'media_provider_resources_on_parent_id' on 'media_provider_resources' ('parent_id');
CREATE INDEX 'media_provider_resources_on_type' on 'media_provider_resources' ('type');
CREATE INDEX 'media_provider_resources_on_identifier' on 'media_provider_resources' ('identifier');
CREATE INDEX 'media_subscriptions_on_order' on 'media_subscriptions' ('order');
CREATE INDEX 'media_subscriptions_on_target_metadata_item_id' on 'media_subscriptions' ('target_metadata_item_id');
CREATE INDEX 'media_grabs_on_metadata_item_id' on 'media_grabs' ('metadata_item_id');
CREATE INDEX 'media_grabs_on_created_at' on 'media_grabs' ('created_at');
CREATE INDEX 'index_metadata_item_clusters_on_library_section_id' ON 'metadata_item_clusters' ('library_section_id');
CREATE INDEX 'index_metadata_item_clusters_on_zoom_level' ON 'metadata_item_clusters' ('zoom_level');
CREATE INDEX 'index_metadata_item_clusters_on_title' ON 'metadata_item_clusters' ('title');
CREATE INDEX 'index_metadata_item_clusterings_on_metadata_item_id' ON 'metadata_item_clusterings' ('metadata_item_id');
CREATE INDEX 'index_metadata_item_clusterings_on_metadata_item_cluster_id' ON 'metadata_item_clusterings' ('metadata_item_cluster_id');
CREATE INDEX 'index_metadata_item_clusterings_on_version' ON 'metadata_item_clusterings' ('version');
CREATE INDEX 'index_metadata_items_on_absolute_index' ON 'metadata_items' ('absolute_index');
CREATE INDEX 'index_locatables_on_locatable_id_and_locatable_type' ON 'locatables' ('locatable_id', 'locatable_type');
CREATE INDEX 'index_blobs_on_linked_type' ON 'blobs' ('linked_type');
CREATE INDEX 'index_tags_on_parent_id' ON 'tags' ('parent_id');
CREATE INDEX 'index_locatables_on_geocoding_version' ON 'locatables' ('geocoding_version');
CREATE INDEX 'index_external_metadata_sources_on_online' ON 'external_metadata_sources' ('online');
CREATE INDEX 'index_external_metadata_items_on_external_source_id' ON 'external_metadata_items' ('external_metadata_source_id');
CREATE INDEX 'index_external_metadata_items_on_title' ON 'external_metadata_items' ('title');
CREATE INDEX 'index_external_metadata_items_on_parent_title' ON 'external_metadata_items' ('parent_title');
CREATE INDEX 'index_external_metadata_items_on_metadata_type' ON 'external_metadata_items' ('metadata_type');
CREATE INDEX 'index_title_sort_naturalsort' ON 'metadata_items' ('title_sort' COLLATE naturalsort);
CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version" );
CREATE UNIQUE INDEX "index_play_queues_on_client_identifier_and_account_id_and_metadata_type" ON "play_queues" ("client_identifier", "account_id", "metadata_type" );
CREATE UNIQUE INDEX "index_synced_play_queue_generators_on_sync_list_id_and_play_queue_generator_id" ON "synced_play_queue_generators" ("sync_list_id", "play_queue_generator_id" );
CREATE UNIQUE INDEX "index_synced_ancestor_items_on_sync_list_id_and_metadata_item_id" ON "synced_ancestor_items" ("sync_list_id", "metadata_item_id" );
CREATE UNIQUE INDEX "index_synced_library_sections_on_sync_list_id_and_library_section_id" ON "synced_library_sections" ("sync_list_id", "library_section_id" );
CREATE UNIQUE INDEX "index_synced_metadata_items_on_sync_list_id_and_metadata_item_id" ON "synced_metadata_items" ("sync_list_id", "metadata_item_id" );
CREATE UNIQUE INDEX "index_preferences_on_name" ON "preferences" ("name" );
CREATE UNIQUE INDEX 'media_provider_resources_on_uuid' on 'media_provider_resources' ('uuid');
CREATE UNIQUE INDEX 'media_grabs_on_uuid' on 'media_grabs' ('uuid');
CREATE UNIQUE INDEX 'index_locatables_on_location_id_and_locatable_id_and_locatable_type' ON 'locatables' ('location_id', 'locatable_id', 'locatable_type');
CREATE UNIQUE INDEX 'index_location_places_on_location_id_and_guid' ON 'location_places' ('location_id', 'guid');
CREATE UNIQUE INDEX 'index_external_metadata_sources_on_uri' ON 'external_metadata_sources' ('uri');
CREATE UNIQUE INDEX 'index_media_stream_settings_on_media_stream_id_and_account_id' ON 'media_stream_settings' ('media_stream_id', 'account_id');
CREATE INDEX 'index_statistics_resources_on_timespan' ON 'statistics_resources' ('timespan');
CREATE INDEX 'index_statistics_resources_on_at' ON 'statistics_resources' ('at');
CREATE INDEX 'index_metadata_items_on_remote' ON 'metadata_items' ('remote');
CREATE INDEX 'index_metadata_subscription_desired_items_on_sub_id' ON 'metadata_subscription_desired_items' ('sub_id');
CREATE INDEX 'index_metadata_subscription_desired_items_on_remote_id' ON 'metadata_subscription_desired_items' ('remote_id');
CREATE INDEX 'index_directories_on_parent_directory_id' ON 'directories' ('parent_directory_id');
CREATE INDEX 'remote_id_translation_on_local_id' ON 'remote_id_translation' ('local_id');
CREATE INDEX 'remote_id_translation_on_remote_id' ON 'remote_id_translation' ('remote_id');
CREATE INDEX 'index_statistics_bandwidth_on_at' ON 'statistics_bandwidth' ('at');
CREATE INDEX 'index_statistics_media_on_at' ON 'statistics_media' ('at');
CREATE INDEX 'index_statistics_bandwidth_on_account_id_and_timespan_and_at' ON 'statistics_bandwidth' ('account_id', 'timespan', 'at');
CREATE INDEX 'index_statistics_media_on_account_id_and_timespan_and_at' ON 'statistics_media' ('account_id', 'timespan', 'at');
CREATE UNIQUE INDEX 'index_blobs_on_linked_type_linked_id_and_blob_type' ON 'blobs' ('linked_type', 'linked_id', 'blob_type');
CREATE UNIQUE INDEX 'index_blobs_on_linked_type_linked_guid_and_blob_type' ON 'blobs' ('linked_type', 'linked_guid', 'blob_type');
CREATE INDEX 'index_hub_templates_on_section_and_home_visibility' ON 'hub_templates' ('section','home_visibility');
CREATE VIRTUAL TABLE spellfix_metadata_titles USING spellfix1;
CREATE VIRTUAL TABLE spellfix_tag_titles USING spellfix1;
CREATE VIRTUAL TABLE fts4_metadata_titles USING fts4(content='metadata_items', title, title_sort, original_title)
/* fts4_metadata_titles(title,title_sort,original_title) */;
CREATE TRIGGER fts4_metadata_titles_before_update BEFORE UPDATE ON metadata_items BEGIN DELETE FROM fts4_metadata_titles WHERE docid=old.rowid; END;
CREATE TRIGGER fts4_metadata_titles_before_delete BEFORE DELETE ON metadata_items BEGIN DELETE FROM fts4_metadata_titles WHERE docid=old.rowid; END;
CREATE TRIGGER fts4_metadata_titles_after_update AFTER UPDATE ON metadata_items BEGIN INSERT INTO fts4_metadata_titles(docid, title, title_sort, original_title) VALUES(new.rowid, new.title, new.title_sort, new.original_title); END;
CREATE TRIGGER fts4_metadata_titles_after_insert AFTER INSERT ON metadata_items BEGIN INSERT INTO fts4_metadata_titles(docid, title, title_sort, original_title) VALUES(new.rowid, new.title, new.title_sort, new.original_title); END;
CREATE VIRTUAL TABLE fts4_tag_titles USING fts4(content='tags', tag)
/* fts4_tag_titles(tag) */;
CREATE TRIGGER fts4_tag_titles_before_update BEFORE UPDATE ON tags BEGIN DELETE FROM fts4_tag_titles WHERE docid=old.rowid; END;
CREATE TRIGGER fts4_tag_titles_before_delete BEFORE DELETE ON tags BEGIN DELETE FROM fts4_tag_titles WHERE docid=old.rowid; END;
CREATE TRIGGER fts4_tag_titles_after_update AFTER UPDATE ON tags BEGIN INSERT INTO fts4_tag_titles(docid, tag) VALUES(new.rowid, new.tag); END;
CREATE TRIGGER fts4_tag_titles_after_insert AFTER INSERT ON tags BEGIN INSERT INTO fts4_tag_titles(docid, tag) VALUES(new.rowid, new.tag); END;
CREATE VIRTUAL TABLE 'locations' USING rtree('id' integer, 'lat_min' float, 'lat_max' float, 'lon_min' float, 'lon_max' float)
/* locations(id,lat_min,lat_max,lon_min,lon_max) */;
